import pandas as pd
import pandas_ta as ta  # The new engine awakens

def get_signal(df: pd.DataFrame):
    # pandas-ta magic: Adds RSI directly to dataframe
    df.ta.rsi(close='close', length=14, append=True)  # Creates RSI_14 column
    
    if df['RSI_14'].iloc[-1] < 30:
        return 'buy'  # Oversold – time to stack
    if df['RSI_14'].iloc[-1] > 70:
        return 'sell'  # Overbought – lock profits
    return None

# Bonus evolution: Add more indicators effortlessly
# df.ta.macd(append=True)  # MACD signals
# df.ta.bbands(append=True)  # Bollinger Bands
# df.ta.strategy("All")  # Unleash 130+ at once for backtesting
import time
from data.exchange import ExchangeAdapter
from core.signals import get_signal
from core.risk import RiskManager
from core.portfolio import Portfolio
from analytics.logger import logger

class AITradingBot:
    def __init__(self):
        self.exchange = ExchangeAdapter('binance')
        self.risk = RiskManager()
        self.portfolio = Portfolio()
        self.running = True

    def run(self):
        logger.info("Bot started – hunting profits")
        while self.running:
            try:
                data = self.exchange.fetch_ohlcv('BTC/USDT', '1h')
                signal = get_signal(data)
                if signal:
                    size = self.risk.position_size(self.portfolio.balance)
                    self.exchange.place_order(signal, size)
                    self.portfolio.update_pnl()
                    logger.info(f"Executed {signal} – size {size}")
            except Exception as e:
                logger.error(f"Error: {e}")
            time.sleep(60)  # Check every minute

    def get_status(self):
        return {"balance": self.portfolio.balance, "pnl": self.portfolio.pnl}
import pandas as pd
import talib

def get_signal(df: pd.DataFrame):
    df['rsi'] = talib.RSI(df['close'])
    if df['rsi'].iloc[-1] < 30:
        return 'buy'
    if df['rsi'].iloc[-1] > 70:
        return 'sell'
    return None
from config import Config

class RiskManager:
    def position_size(self, balance):
        return balance * Config.RISK_PER_TRADE
from config import Config

class Portfolio:
    def __init__(self):
        self.balance = Config.INITIAL_CAPITAL
        self.pnl = 0.0

    def update_pnl(self):
        # Placeholder – integrate real balance fetch
        pass
import ccxt
import pandas as pd
from config import Config

class ExchangeAdapter:
    def __init__(self, name='binance'):
        self.ex = ccxt.binance({
            'apiKey': Config.BINANCE_API_KEY,
            'secret': Config.BINANCE_API_SECRET,
            'enableRateLimit': True,
        })

    def fetch_ohlcv(self, symbol, timeframe='1h', limit=100):
        ohlcv = self.ex.fetch_ohlcv(symbol, timeframe, limit=limit)
        df = pd.DataFrame(ohlcv, columns=['timestamp', 'open', 'high', 'low', 'close', 'volume'])
        df['timestamp'] = pd.to_datetime(df['timestamp'], unit='ms')
        return df

    def place_order(self, signal, amount):
        # Simplified – add real order logic
        print(f"Placing {signal} order for {amount}")
